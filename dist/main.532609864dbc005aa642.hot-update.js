"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdatecomic_viewer"]("main",{

/***/ "./src/app.ts":
/*!********************!*\
  !*** ./src/app.ts ***!
  \********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst wnacg_1 = __importDefault(__webpack_require__(/*! @/instances/wnacg */ \"./src/instances/wnacg.ts\"));\nasync function launch() {\n    new wnacg_1.default();\n}\nlaunch();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBwLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZ0NBQWdDLG1CQUFPLENBQUMsbURBQW1CO0FBQzNEO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29taWMtdmlld2VyLy4vc3JjL2FwcC50cz8yMzk5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3Qgd25hY2dfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiQC9pbnN0YW5jZXMvd25hY2dcIikpO1xuYXN5bmMgZnVuY3Rpb24gbGF1bmNoKCkge1xuICAgIG5ldyB3bmFjZ18xLmRlZmF1bHQoKTtcbn1cbmxhdW5jaCgpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/app.ts\n");

/***/ }),

/***/ "./src/instances/wnacg.ts":
/*!********************************!*\
  !*** ./src/instances/wnacg.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nfunction getComicID() {\n    const arr = /https:\\/\\/wnacg.com\\/photos-index-.*?-(\\d+).html/.exec(location.href);\n    if (arr?.length === 2) {\n        return arr[1];\n    }\n    return 0;\n}\nfunction insertOpenButton() {\n    const parent = document.querySelector('.asTBcell.uwthumb');\n    const child = parent?.querySelectorAll('a.btn');\n    const newLink = document.createElement('a');\n    newLink.className = 'btn';\n    newLink.innerText = '全览阅读';\n    newLink.style.width = '130px';\n    newLink.onclick = () => {\n        console.log('123');\n    };\n    if (parent && child && child?.length > 2) {\n        parent.removeChild(child[1]);\n        parent.insertBefore(newLink, child[0]);\n    }\n}\nfunction isComicInfoPage() {\n    const flag = /https:\\/\\/wnacg.com\\/photos-index-(.*)?.html/.test(location.href);\n    console.log('* is wnacg comic info page: ', flag);\n    return flag;\n}\nclass Wnacg {\n    imgUrls = [];\n    constructor() {\n        this.init();\n    }\n    async init() {\n        const imgUrls = await this.getImageURLs();\n        if (imgUrls) {\n            this.imgUrls = imgUrls;\n        }\n        // 插入 open button\n        if (isComicInfoPage()) {\n            insertOpenButton();\n        }\n    }\n    async getImageURLs() {\n        const res = await fetch(`https://wnacg.com/photos-gallery-aid-${getComicID()}.html`, {\n            method: 'GET',\n        });\n        const rb = res.body;\n        if (!rb) {\n            return;\n        }\n        const reader = rb.getReader();\n        const stream = new ReadableStream({\n            start(controller) {\n                function push() {\n                    reader.read().then(({ done, value }) => {\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        controller.enqueue(value);\n                        push();\n                    });\n                }\n                push();\n            },\n        });\n        const result = new Response(stream, {\n            headers: { 'Content-Type': 'text/html' },\n        }).text();\n        const str = await result;\n        const arr = str.matchAll(/\\/\\/(.*?\\..*?)\\\\/g);\n        const list = [];\n        let cur = arr.next();\n        while (cur.value) {\n            if (cur.done) {\n                break;\n            }\n            if (cur.value.length >= 2 && typeof cur.value[1] === 'string') {\n                list.push(`https://${cur.value[1]}`);\n            }\n            cur = arr.next();\n        }\n        return list;\n    }\n}\nexports[\"default\"] = Wnacg;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5zdGFuY2VzL3duYWNnLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLGFBQWE7QUFDckY7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxhQUFhO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxhQUFhO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29taWMtdmlld2VyLy4vc3JjL2luc3RhbmNlcy93bmFjZy50cz82YmU3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gZ2V0Q29taWNJRCgpIHtcbiAgICBjb25zdCBhcnIgPSAvaHR0cHM6XFwvXFwvd25hY2cuY29tXFwvcGhvdG9zLWluZGV4LS4qPy0oXFxkKykuaHRtbC8uZXhlYyhsb2NhdGlvbi5ocmVmKTtcbiAgICBpZiAoYXJyPy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIGFyclsxXTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBpbnNlcnRPcGVuQnV0dG9uKCkge1xuICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc1RCY2VsbC51d3RodW1iJyk7XG4gICAgY29uc3QgY2hpbGQgPSBwYXJlbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuYnRuJyk7XG4gICAgY29uc3QgbmV3TGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBuZXdMaW5rLmNsYXNzTmFtZSA9ICdidG4nO1xuICAgIG5ld0xpbmsuaW5uZXJUZXh0ID0gJ+WFqOiniOmYheivuyc7XG4gICAgbmV3TGluay5zdHlsZS53aWR0aCA9ICcxMzBweCc7XG4gICAgbmV3TGluay5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnMTIzJyk7XG4gICAgfTtcbiAgICBpZiAocGFyZW50ICYmIGNoaWxkICYmIGNoaWxkPy5sZW5ndGggPiAyKSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChjaGlsZFsxXSk7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobmV3TGluaywgY2hpbGRbMF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQ29taWNJbmZvUGFnZSgpIHtcbiAgICBjb25zdCBmbGFnID0gL2h0dHBzOlxcL1xcL3duYWNnLmNvbVxcL3Bob3Rvcy1pbmRleC0oLiopPy5odG1sLy50ZXN0KGxvY2F0aW9uLmhyZWYpO1xuICAgIGNvbnNvbGUubG9nKCcqIGlzIHduYWNnIGNvbWljIGluZm8gcGFnZTogJywgZmxhZyk7XG4gICAgcmV0dXJuIGZsYWc7XG59XG5jbGFzcyBXbmFjZyB7XG4gICAgaW1nVXJscyA9IFtdO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgY29uc3QgaW1nVXJscyA9IGF3YWl0IHRoaXMuZ2V0SW1hZ2VVUkxzKCk7XG4gICAgICAgIGlmIChpbWdVcmxzKSB7XG4gICAgICAgICAgICB0aGlzLmltZ1VybHMgPSBpbWdVcmxzO1xuICAgICAgICB9XG4gICAgICAgIC8vIOaPkuWFpSBvcGVuIGJ1dHRvblxuICAgICAgICBpZiAoaXNDb21pY0luZm9QYWdlKCkpIHtcbiAgICAgICAgICAgIGluc2VydE9wZW5CdXR0b24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRJbWFnZVVSTHMoKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL3duYWNnLmNvbS9waG90b3MtZ2FsbGVyeS1haWQtJHtnZXRDb21pY0lEKCl9Lmh0bWxgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmIgPSByZXMuYm9keTtcbiAgICAgICAgaWYgKCFyYikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHJiLmdldFJlYWRlcigpO1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHB1c2goKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkKCkudGhlbigoeyBkb25lLCB2YWx1ZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHVzaCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBSZXNwb25zZShzdHJlYW0sIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2h0bWwnIH0sXG4gICAgICAgIH0pLnRleHQoKTtcbiAgICAgICAgY29uc3Qgc3RyID0gYXdhaXQgcmVzdWx0O1xuICAgICAgICBjb25zdCBhcnIgPSBzdHIubWF0Y2hBbGwoL1xcL1xcLyguKj9cXC4uKj8pXFxcXC9nKTtcbiAgICAgICAgY29uc3QgbGlzdCA9IFtdO1xuICAgICAgICBsZXQgY3VyID0gYXJyLm5leHQoKTtcbiAgICAgICAgd2hpbGUgKGN1ci52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGN1ci5kb25lKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VyLnZhbHVlLmxlbmd0aCA+PSAyICYmIHR5cGVvZiBjdXIudmFsdWVbMV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKGBodHRwczovLyR7Y3VyLnZhbHVlWzFdfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyID0gYXJyLm5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBXbmFjZztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/instances/wnacg.ts\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("e743858583799befbffd")
/******/ })();
/******/ 
/******/ }
);